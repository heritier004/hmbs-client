{"ast":null,"code":"var _jsxFileName = \"/Users/heritier/repos/cs472_project/client/src/components/Reservation.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Axios = require(\"axios\");\n\nconst Reservation = () => {\n  _s();\n\n  const user = JSON.parse(localStorage.getItem(\"userSigned\"));\n  const [movieSelected, setMovieSelected] = useState([]);\n  const selectedSched = parseInt(localStorage.getItem(\"selectedSched\"));\n  const schedule = JSON.parse(localStorage.getItem(\"schedule\"));\n  const selectedSeats = JSON.parse(localStorage.getItem(\"currentSeat\"));\n  const arrOfSeats = [];\n  selectedSeats.forEach(element => {\n    arrOfSeats.push(element.id);\n  });\n\n  const searchMovies = () => {\n    Axios.get(`http://localhost:5001/getMovie/${selectedSched}`).then(response => {\n      setMovieSelected(response.data[0].title);\n    });\n  };\n\n  useEffect(() => {\n    searchMovies();\n  }, []);\n\n  const makeReservation = () => {\n    const article = {\n      selectedSched: selectedSched,\n      userid: user[0].id\n    };\n    Axios.post(`http://localhost:5001/makeReservation`, article).then(response => {\n      if (response.status == 200) {\n        // console.log(response.data.code)\n        Axios.get(`http://localhost:5000/pdf/${user[0].id}/${selectedSched}/${response.data.code}`, {\n          responseType: 'arraybuffer'\n        }).then(res => {\n          const url = window.URL.createObjectURL(new Blob([res.data], {\n            type: \"application/pdf\"\n          }));\n          var link = document.createElement('a');\n          link.href = url;\n          link.setAttribute('download', 'resume.pdf');\n          document.body.appendChild(link);\n          link.click();\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Booking Summary\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"schedule\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"cinemaTitle\",\n            children: \"Booking Summary \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 29\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 24\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: [`Name : `, user[0].firstname + \" \" + user[0].lastname]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"scheduleDetail\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: `Selected Movie:`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 60\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: movieSelected\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 92\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"scheduleDetail\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: `Date :`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 60\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: new Date(schedule[0].startTime).toString().split(\"GMT\")[0]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 84\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"scheduleDetail\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: `seats Selected :`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 60\n            }, this), arrOfSeats.map(seat => /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"seatShow\",\n              children: seat\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 30\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => makeReservation(),\n      children: \"Reserve\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Reservation, \"MMsYico36Hrtprt21e9E5Gjtqao=\");\n\n_c = Reservation;\nexport default Reservation;\n\nvar _c;\n\n$RefreshReg$(_c, \"Reservation\");","map":{"version":3,"names":["useEffect","useState","Axios","require","Reservation","user","JSON","parse","localStorage","getItem","movieSelected","setMovieSelected","selectedSched","parseInt","schedule","selectedSeats","arrOfSeats","forEach","element","push","id","searchMovies","get","then","response","data","title","makeReservation","article","userid","post","status","code","responseType","res","url","window","URL","createObjectURL","Blob","type","link","document","createElement","href","setAttribute","body","appendChild","click","firstname","lastname","Date","startTime","toString","split","map","seat"],"sources":["/Users/heritier/repos/cs472_project/client/src/components/Reservation.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nconst Axios = require(\"axios\");\nconst Reservation = () =>{\n\nconst user = JSON.parse(localStorage.getItem(\"userSigned\"));\nconst[movieSelected,setMovieSelected] = useState([]);\nconst selectedSched = parseInt(localStorage.getItem(\"selectedSched\"));\nconst schedule = JSON.parse(localStorage.getItem(\"schedule\"));\nconst selectedSeats = JSON.parse(localStorage.getItem(\"currentSeat\"));\nconst arrOfSeats = []\nselectedSeats.forEach(element => { arrOfSeats.push(element.id)});\nconst searchMovies = () =>{\n    Axios.get(`http://localhost:5001/getMovie/${selectedSched}`)\n    .then((response)=>{\n        setMovieSelected(response.data[0].title);\n    });\n}\n\nuseEffect (()=>{\n    searchMovies();\n},[]);\n    const makeReservation = ()=>{\n        \n        const article = {selectedSched :selectedSched , userid: user[0].id}\n        Axios.post(`http://localhost:5001/makeReservation`,article)\n        .then((response)=>{\n            if(response.status == 200){\n                // console.log(response.data.code)\n         Axios.get(`http://localhost:5000/pdf/${user[0].id}/${selectedSched}/${response.data.code}`, {responseType: 'arraybuffer'})\n        .then((res)=>{\n            const url = window.URL.createObjectURL(new Blob([res.data]\n                ,{type: \"application/pdf\"}))\n              var link = document.createElement('a');\n              link.href = url;\n              link.setAttribute('download', 'resume.pdf');\n              document.body.appendChild(link);\n              link.click();\n        })\n            }\n        })\n        \n}\n    \nreturn(\n    <div className=\"app\">       \n    <h1>Booking Summary</h1>\n    <div className=\"container\">\n                <div className=\"schedule\" >\n                       <h2> <p className=\"cinemaTitle\">Booking Summary </p> </h2>\n                        <div>\n                            <h4>{`Name : `}{user[0].firstname+\" \"+user[0].lastname}</h4>        \n                            <h5 className=\"scheduleDetail\"><span>{`Selected Movie:`}</span><span>{movieSelected}</span></h5>\n                            <h5 className=\"scheduleDetail\"><span>{`Date :`}</span> <span>{new Date(schedule[0].startTime).toString().split(\"GMT\")[0]}</span></h5>\n                            <h5 className=\"scheduleDetail\"><span>{`seats Selected :`}</span>\n                            {\n                                arrOfSeats.map((seat)=>(\n                             <span className=\"seatShow\">{seat}</span>\n                                ))\n                             }</h5>\n                            \n                        </div>\n                    </div>\n                </div>\n                <button onClick={() => makeReservation()}>Reserve</button>\n        </div>\n)\n}\nexport default Reservation;"],"mappings":"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"},"metadata":{},"sourceType":"module"}